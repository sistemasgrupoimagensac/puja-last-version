const y=new URLSearchParams(window.location.search),P=y.get("preciominimo"),N=y.get("preciomaximo"),l=y.get("direccionRemate");if(P){const e=document.getElementById("preciominimo");e.value=P,$(e)}if(N){const e=document.getElementById("preciomaximo");e.value=N,$(e)}if(l){const e=document.getElementById("direccionRemateFiltertittle");l==1&&(e.textContent="Otros"),l==2&&(e.textContent="CACLI"),l==3&&(e.textContent="CAFI"),l==4&&(e.textContent="REMAJU")}function $(e){let t=e.value.replace(/^0|[^\d]/g,"");t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),e.value=t;const o=t.replace(/,/g,"");e.dataset.integerValue=o}document.querySelectorAll(".amount").forEach(e=>{e.addEventListener("input",function(){$(this)})});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("priceRange"),t=document.getElementById("remateButton"),o=document.querySelectorAll(".filters-dropdown-li.filter-operation"),n=document.getElementById("trasactionfiltertittle");o.forEach(a=>{a.addEventListener("click",function(){this.dataset.value==="3"?t.classList.remove("d-none"):t.classList.add("d-none")})}),n.textContent.trim()==="Remate Público"&&(t.classList.remove("d-none"),e.classList.add("d-none"))});const u=document.querySelector("#preciominimo"),m=document.querySelector("#preciomaximo"),f=document.querySelector("#preciominimo_modal"),g=document.querySelector("#preciomaximo_modal");u.addEventListener("change",()=>E(u,m));m.addEventListener("change",()=>I(m,u));f.addEventListener("change",()=>E(f,g));g.addEventListener("change",()=>I(g,f));const v=document.querySelector("#areaminima"),h=document.querySelector("#areamaxima");v.addEventListener("change",()=>E(v,h));h.addEventListener("change",()=>I(h,v));function E(e,t){const o=parseInt(e.dataset.integerValue),n=parseInt(t.dataset.integerValue);o>n&&(t.value=null,t.dataset.integerValue=null)}function I(e,t){const o=parseInt(t.dataset.integerValue),n=parseInt(e.dataset.integerValue);o>n&&(t.value=null,t.dataset.integerValue=null)}const d=document.getElementById("formFilterInmueble"),W=document.querySelectorAll(".filters-dropdown-li.trasaction");document.getElementById("trasactionfiltertittle");W.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();const o=this.getAttribute("data-value");d.querySelectorAll('[name="transaccion"]').forEach(function(n){o==="todos"?n.checked=!1:n.value===o&&(n.checked=!0)}),console.log("change transaccion"),d.submit()})});const X=document.querySelectorAll(".filters-dropdown-li.tipo");document.getElementById("tipofiltertittle");X.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();const o=this.getAttribute("data-value");d.querySelectorAll('[name="categoria"]').forEach(function(n){o==="todos"?n.checked=!1:n.value===o&&(n.checked=!0)}),console.log("change tipo inmueble"),d.submit()})});d.addEventListener("submit",function(e){var L,_,B,C,F,R,D,T,U,O;e.preventDefault();let t=null,o=null;const n=parseInt((L=document.querySelector('input[name="transaccion"]:checked'))==null?void 0:L.value),a=parseInt((_=document.querySelector('input[name="categoria"]:checked'))==null?void 0:_.value);n===1?t="venta":n===2?t="alquiler":n===3&&(t="remate"),a===1?o="casas":a===2?o="departamentos":a===3?o="oficinas":a===4?o="terrenos":a===5&&(o="locales"),(!t||!o)&&alert("Debe seleccionar el tipo de operacion y el tipo de inmueble");const c=`${window.location.origin}/inmuebles/${o}-en-${t}`,r=parseInt((B=document.getElementById("preciominimo_modal"))==null?void 0:B.dataset.integerValue),s=parseInt((C=document.getElementById("preciomaximo_modal"))==null?void 0:C.dataset.integerValue),j=r>=0&&s>=0?`&preciominimo=${r}&preciomaximo=${s}`:"",w=parseInt((F=document.querySelector('input[name="dormitorios"]:checked'))==null?void 0:F.value),H=w>0?`&dormitorios=${w}`:"",x=parseInt((R=document.querySelector('input[name="banos"]:checked'))==null?void 0:R.value),J=x>0?`&banios=${x}`:"",S=parseInt((D=document.getElementById("areaminima"))==null?void 0:D.dataset.integerValue),M=parseInt((T=document.getElementById("areamaxima"))==null?void 0:T.dataset.integerValue),z=S>=0&&M>=0?`&areaMinima=${S}&areaMaxima=${M}`:"",p=parseInt((U=document.getElementById("antiguedad"))==null?void 0:U.value),b=typeof p=="number"&&!isNaN(p)?b=`&antiguedad=${p}`:"",V=parseInt((O=document.querySelector('input[name="estacionamientos"]:checked'))==null?void 0:O.value),q=V>0?q=`&estacionamientos=${V}`:"",A=[];document.querySelectorAll('input[name="options[]"]:checked').forEach(Q=>A.push(Q.value));let k=A.join(","),G=k.length>0?`&caracteristicas=${k}`:"",K=`${c}?buscar=1${j}${H}${J}${z}${b}${q}${G}`;window.location.href=K});const Y=document.getElementById("direccionRemateFiltertittle");document.querySelectorAll(".filterOthers").forEach(function(e){e.addEventListener("click",function(){const t=window.location,o=t.origin+t.pathname;let n="";if(Y.textContent=this.textContent.trim(),this.dataset.submit==="filtersbuscarprecios")n=`${o}?preciominimo=${u.dataset.integerValue}&preciomaximo=${m.dataset.integerValue}`,console.log("sadsa");else if(this.dataset.submit==="direccionRemate"){var a=this.dataset.valor;console.log(this.dataset.valor),n=`${o}?direccionRemate=${a}`}window.location.href=n})});document.querySelectorAll(".filters-relevance .filters-dropdown-li").forEach(function(e){e.addEventListener("click",function(){const t=this.dataset.value,o=this.dataset.sort;Z(t,o)})});function Z(e,t){const o=document.querySelector(".filterAvisos-container"),n=Array.from(document.querySelectorAll(".filterAvisos-card"));n.sort(function(a,i){let c,r;switch(e){case"relevancia":c=new Date(a.dataset.relevancia),r=new Date(i.dataset.relevancia),console.log(`Comparando relevancia: ${c} y ${r}`);break;case"menor_precio_soles":case"mayor_precio_soles":c=parseFloat(a.dataset.precio_soles),r=parseFloat(i.dataset.precio_soles),console.log(`Comparando precios en soles: ${c} y ${r}`);break;case"menor_precio_dolares":case"mayor_precio_dolares":c=parseFloat(a.dataset.precio_dolares),r=parseFloat(i.dataset.precio_dolares),console.log(`Comparando precios en dólares: ${c} y ${r}`);break;case"recientes":c=new Date(a.dataset.reciente),r=new Date(i.dataset.reciente),console.log(`Comparando fechas: ${c} y ${r}`);break;case"vistos":c=parseInt(a.dataset.vistos),r=parseInt(i.dataset.vistos),console.log(`Comparando vistos: ${c} y ${r}`);break;default:return 0}const s=t==="asc"?c-r:r-c;return console.log(`Resultado de la comparación: ${s}`),s}),o.innerHTML="",n.forEach(function(a){o.appendChild(a)}),document.getElementById("relevanceFilterTittle").innerText=ee(e)}function ee(e){switch(e){case"menor_precio_soles":return"Menor precio Soles";case"mayor_precio_soles":return"Mayor precio Soles";case"menor_precio_dolares":return"Menor precio Dólares";case"mayor_precio_dolares":return"Mayor precio Dólares";case"recientes":return"Recientes";case"vistos":return"Más vistos";default:return"Relevancia"}}
