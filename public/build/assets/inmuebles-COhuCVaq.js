document.querySelectorAll(".amount").forEach(t=>{t.addEventListener("input",function(){let e=this.value.replace(/^0|[^\d]/g,"");e=e.replace(/\B(?=(\d{3})+(?!\d))/g,","),this.value=e;const a=e.replace(/,/g,"");this.dataset.integerValue=a})});const i=document.querySelector("#preciominimo"),l=document.querySelector("#preciomaximo"),u=document.querySelector("#preciominimo_modal"),m=document.querySelector("#preciomaximo_modal");i.addEventListener("change",()=>v(i,l));l.addEventListener("change",()=>g(l,i));u.addEventListener("change",()=>v(u,m));m.addEventListener("change",()=>g(m,u));const p=document.querySelector("#areaminima"),f=document.querySelector("#areamaxima");p.addEventListener("change",()=>v(p,f));f.addEventListener("change",()=>g(f,p));function v(t,e){const a=parseInt(t.dataset.integerValue),o=parseInt(e.dataset.integerValue);a>o&&(e.value=null,e.dataset.integerValue=null)}function g(t,e){const a=parseInt(e.dataset.integerValue),o=parseInt(t.dataset.integerValue);a>o&&(e.value=null,e.dataset.integerValue=null)}const d=document.getElementById("formFilterInmueble"),h=document.querySelectorAll(".filters-dropdown-li.trasaction");document.getElementById("trasactionfiltertittle");h.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();const a=this.getAttribute("data-value");d.querySelectorAll('[name="transaccion"]').forEach(function(o){a==="todos"?o.checked=!1:o.value===a&&(o.checked=!0)}),d.submit()})});const E=document.querySelectorAll(".filters-dropdown-li.tipo");document.getElementById("tipofiltertittle");E.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();const a=this.getAttribute("data-value");d.querySelectorAll('[name="categoria"]').forEach(function(o){a==="todos"?o.checked=!1:o.value===a&&(o.checked=!0)}),d.submit()})});document.getElementById("filtersbuscarprecios").addEventListener("click",function(){const t=window.location,a=`${t.origin+t.pathname}?preciominimo=${i.dataset.integerValue}&preciomaximo=${l.dataset.integerValue}`;window.location.href=a});document.querySelectorAll(".filters-relevance .filters-dropdown-li").forEach(function(t){t.addEventListener("click",function(){const e=this.dataset.value,a=this.dataset.sort;_(e,a)})});function _(t,e){const a=document.querySelector(".filterAvisos-container"),o=Array.from(document.querySelectorAll(".filterAvisos-card"));o.sort(function(c,s){let r,n;switch(t){case"relevancia":r=new Date(c.dataset.relevancia),n=new Date(s.dataset.relevancia),console.log(`Comparando relevancia: ${r} y ${n}`);break;case"menor_precio_soles":case"mayor_precio_soles":r=parseFloat(c.dataset.precio_soles),n=parseFloat(s.dataset.precio_soles),console.log(`Comparando precios en soles: ${r} y ${n}`);break;case"menor_precio_dolares":case"mayor_precio_dolares":r=parseFloat(c.dataset.precio_dolares),n=parseFloat(s.dataset.precio_dolares),console.log(`Comparando precios en dólares: ${r} y ${n}`);break;case"recientes":r=new Date(c.dataset.reciente),n=new Date(s.dataset.reciente),console.log(`Comparando fechas: ${r} y ${n}`);break;case"vistos":r=parseInt(c.dataset.vistos),n=parseInt(s.dataset.vistos),console.log(`Comparando vistos: ${r} y ${n}`);break;default:return 0}const y=e==="asc"?r-n:n-r;return console.log(`Resultado de la comparación: ${y}`),y}),a.innerHTML="",o.forEach(function(c){a.appendChild(c)}),document.getElementById("relevanceFilterTittle").innerText=V(t)}function V(t){switch(t){case"menor_precio_soles":return"Menor precio Soles";case"mayor_precio_soles":return"Mayor precio Soles";case"menor_precio_dolares":return"Menor precio Dólares";case"mayor_precio_dolares":return"Mayor precio Dólares";case"recientes":return"Recientes";case"vistos":return"Más vistos";default:return"Relevancia"}}
