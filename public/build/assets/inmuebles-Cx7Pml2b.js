document.querySelectorAll(".amount").forEach(a=>{a.addEventListener("input",function(){let e=this.value.replace(/^0|[^\d]/g,"");e=e.replace(/\B(?=(\d{3})+(?!\d))/g,","),this.value=e;const t=e.replace(/,/g,"");this.dataset.integerValue=t})});const d=document.querySelector("#preciominimo"),u=document.querySelector("#preciomaximo"),p=document.querySelector("#preciominimo_modal"),f=document.querySelector("#preciomaximo_modal");d.addEventListener("change",()=>h(d,u));u.addEventListener("change",()=>y(u,d));p.addEventListener("change",()=>h(p,f));f.addEventListener("change",()=>y(f,p));const g=document.querySelector("#areaminima"),v=document.querySelector("#areamaxima");g.addEventListener("change",()=>h(g,v));v.addEventListener("change",()=>y(v,g));function h(a,e){const t=parseInt(a.dataset.integerValue),o=parseInt(e.dataset.integerValue);t>o&&(e.value=null,e.dataset.integerValue=null)}function y(a,e){const t=parseInt(e.dataset.integerValue),o=parseInt(a.dataset.integerValue);t>o&&(e.value=null,e.dataset.integerValue=null)}const l=document.getElementById("formFilterInmueble"),N=document.querySelectorAll(".filters-dropdown-li.trasaction");document.getElementById("trasactionfiltertittle");N.forEach(function(a){a.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("data-value");l.querySelectorAll('[name="transaccion"]').forEach(function(o){t==="todos"?o.checked=!1:o.value===t&&(o.checked=!0)}),console.log("change transaccion"),l.submit()})});const O=document.querySelectorAll(".filters-dropdown-li.tipo");document.getElementById("tipofiltertittle");O.forEach(function(a){a.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("data-value");l.querySelectorAll('[name="categoria"]').forEach(function(o){t==="todos"?o.checked=!1:o.value===t&&(o.checked=!0)}),console.log("change tipo inmueble"),l.submit()})});l.addEventListener("submit",function(a){var B,L,C,F,T,U;a.preventDefault();let e=null,t=null;const o=parseInt((B=document.querySelector('input[name="transaccion"]:checked'))==null?void 0:B.value),i=parseInt((L=document.querySelector('input[name="categoria"]:checked'))==null?void 0:L.value);o===1?e="venta":o===2?e="alquiler":o===3&&(e="remate"),i===1?t="casas":i===2?t="departamentos":i===3?t="oficinas":i===4?t="terrenos":i===5&&(t="locales"),(!e||!t)&&alert("Debe seleccionar el tipo de operacion y el tipo de inmueble");const r=`${window.location.origin}/inmuebles/${t}-en-${e}`,n=parseInt(document.getElementById("preciominimo_modal").dataset.integerValue),s=parseInt(document.getElementById("preciomaximo_modal").dataset.integerValue);console.log(n);let $="";n>=0&&s>=0?$=`preciominimo=${n}&preciomaximo=${s}`:alert("Debe registrar tanto un minimo como maximo.");let E="";const I=parseInt((C=document.querySelector('input[name="dormitorios"]:checked'))==null?void 0:C.value);I>0?E=`dormitorios=${I}`:alert("Debe registrar cantidad de dormitorios.");let b="";const w=parseInt((F=document.querySelector('input[name="banos"]:checked'))==null?void 0:F.value);w>0?b=`banios=${w}`:alert("Debe registrar cantidad de baños.");const S=parseInt(document.getElementById("areaminima").dataset.integerValue),V=parseInt(document.getElementById("areamaxima").dataset.integerValue);let _="";S>=0&&V>=0?_=`areaMinima=${S}&areaMaxima=${V}`:alert("Debe registrar tanto un minimo como maximo en el Area Total.");let k="";const m=parseInt((T=document.getElementById("antiguedad"))==null?void 0:T.value);typeof m=="number"&&!isNaN(m)?k=`antiguedad=${m}`:alert("Debe registrar la antiguedad.");let q="";const x=parseInt((U=document.querySelector('input[name="estacionamientos"]:checked'))==null?void 0:U.value);x>0?q=`estacionamientos=${x}`:alert("Debe registrar la cantidad de estacionamientos.");let M="";const D=[];document.querySelectorAll('input[name="options[]"]:checked').forEach(R=>D.push(R.value)),M=`&caracteristicas=${D.join(",")}`;let A=`${r}?${$}&${E}&${b}&${_}&${k}&${q}${M}`;console.log(r),console.log(A),window.location.href=A});document.getElementById("filtersbuscarprecios").addEventListener("click",function(){const a=window.location,t=`${a.origin+a.pathname}?preciominimo=${d.dataset.integerValue}&preciomaximo=${u.dataset.integerValue}`;window.location.href=t});document.querySelectorAll(".filters-relevance .filters-dropdown-li").forEach(function(a){a.addEventListener("click",function(){const e=this.dataset.value,t=this.dataset.sort;j(e,t)})});function j(a,e){const t=document.querySelector(".filterAvisos-container"),o=Array.from(document.querySelectorAll(".filterAvisos-card"));o.sort(function(i,c){let r,n;switch(a){case"relevancia":r=new Date(i.dataset.relevancia),n=new Date(c.dataset.relevancia),console.log(`Comparando relevancia: ${r} y ${n}`);break;case"menor_precio_soles":case"mayor_precio_soles":r=parseFloat(i.dataset.precio_soles),n=parseFloat(c.dataset.precio_soles),console.log(`Comparando precios en soles: ${r} y ${n}`);break;case"menor_precio_dolares":case"mayor_precio_dolares":r=parseFloat(i.dataset.precio_dolares),n=parseFloat(c.dataset.precio_dolares),console.log(`Comparando precios en dólares: ${r} y ${n}`);break;case"recientes":r=new Date(i.dataset.reciente),n=new Date(c.dataset.reciente),console.log(`Comparando fechas: ${r} y ${n}`);break;case"vistos":r=parseInt(i.dataset.vistos),n=parseInt(c.dataset.vistos),console.log(`Comparando vistos: ${r} y ${n}`);break;default:return 0}const s=e==="asc"?r-n:n-r;return console.log(`Resultado de la comparación: ${s}`),s}),t.innerHTML="",o.forEach(function(i){t.appendChild(i)}),document.getElementById("relevanceFilterTittle").innerText=H(a)}function H(a){switch(a){case"menor_precio_soles":return"Menor precio Soles";case"mayor_precio_soles":return"Mayor precio Soles";case"menor_precio_dolares":return"Menor precio Dólares";case"mayor_precio_dolares":return"Mayor precio Dólares";case"recientes":return"Recientes";case"vistos":return"Más vistos";default:return"Relevancia"}}
