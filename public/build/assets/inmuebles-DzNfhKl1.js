document.querySelectorAll(".amount").forEach(a=>{a.addEventListener("input",function(){let e=this.value.replace(/^0|[^\d]/g,"");e=e.replace(/\B(?=(\d{3})+(?!\d))/g,","),this.value=e;const t=e.replace(/,/g,"");this.dataset.integerValue=t})});const d=document.querySelector("#preciominimo"),u=document.querySelector("#preciomaximo"),p=document.querySelector("#preciominimo_modal"),f=document.querySelector("#preciomaximo_modal");d.addEventListener("change",()=>h(d,u));u.addEventListener("change",()=>y(u,d));p.addEventListener("change",()=>h(p,f));f.addEventListener("change",()=>y(f,p));const g=document.querySelector("#areaminima"),v=document.querySelector("#areamaxima");g.addEventListener("change",()=>h(g,v));v.addEventListener("change",()=>y(v,g));function h(a,e){const t=parseInt(a.dataset.integerValue),o=parseInt(e.dataset.integerValue);t>o&&(e.value=null,e.dataset.integerValue=null)}function y(a,e){const t=parseInt(e.dataset.integerValue),o=parseInt(a.dataset.integerValue);t>o&&(e.value=null,e.dataset.integerValue=null)}const l=document.getElementById("formFilterInmueble"),z=document.querySelectorAll(".filters-dropdown-li.trasaction");document.getElementById("trasactionfiltertittle");z.forEach(function(a){a.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("data-value");l.querySelectorAll('[name="transaccion"]').forEach(function(o){t==="todos"?o.checked=!1:o.value===t&&(o.checked=!0)}),console.log("change transaccion"),l.submit()})});const G=document.querySelectorAll(".filters-dropdown-li.tipo");document.getElementById("tipofiltertittle");G.forEach(function(a){a.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("data-value");l.querySelectorAll('[name="categoria"]').forEach(function(o){t==="todos"?o.checked=!1:o.value===t&&(o.checked=!0)}),console.log("change tipo inmueble"),l.submit()})});l.addEventListener("submit",function(a){var q,M,x,A,B,L,D,C,F,T;a.preventDefault();let e=null,t=null;const o=parseInt((q=document.querySelector('input[name="transaccion"]:checked'))==null?void 0:q.value),c=parseInt((M=document.querySelector('input[name="categoria"]:checked'))==null?void 0:M.value);o===1?e="venta":o===2?e="alquiler":o===3&&(e="remate"),c===1?t="casas":c===2?t="departamentos":c===3?t="oficinas":c===4?t="terrenos":c===5&&(t="locales"),(!e||!t)&&alert("Debe seleccionar el tipo de operacion y el tipo de inmueble");const r=`${window.location.origin}/inmuebles/${t}-en-${e}`,n=parseInt((x=document.getElementById("preciominimo_modal"))==null?void 0:x.dataset.integerValue),s=parseInt((A=document.getElementById("preciomaximo_modal"))==null?void 0:A.dataset.integerValue),U=n>=0&&s>=0?`&preciominimo=${n}&preciomaximo=${s}`:"",$=parseInt((B=document.querySelector('input[name="dormitorios"]:checked'))==null?void 0:B.value),R=$>0?`&dormitorios=${$}`:"",E=parseInt((L=document.querySelector('input[name="banos"]:checked'))==null?void 0:L.value),N=E>0?`&banios=${E}`:"",I=parseInt((D=document.getElementById("areaminima"))==null?void 0:D.dataset.integerValue),w=parseInt((C=document.getElementById("areamaxima"))==null?void 0:C.dataset.integerValue),O=I>=0&&w>=0?`&areaMinima=${I}&areaMaxima=${w}`:"",m=parseInt((F=document.getElementById("antiguedad"))==null?void 0:F.value),S=typeof m=="number"&&!isNaN(m)?S=`&antiguedad=${m}`:"",b=parseInt((T=document.querySelector('input[name="estacionamientos"]:checked'))==null?void 0:T.value),V=b>0?V=`&estacionamientos=${b}`:"",_=[];document.querySelectorAll('input[name="options[]"]:checked').forEach(P=>_.push(P.value));let k=_.join(","),j=k.length>0?`&caracteristicas=${k}`:"",H=`${r}?buscar=1${U}${R}${N}${O}${S}${V}${j}`;window.location.href=H});document.getElementById("filtersbuscarprecios").addEventListener("click",function(){const a=window.location,t=`${a.origin+a.pathname}?preciominimo=${d.dataset.integerValue}&preciomaximo=${u.dataset.integerValue}`;window.location.href=t});document.querySelectorAll(".filters-relevance .filters-dropdown-li").forEach(function(a){a.addEventListener("click",function(){const e=this.dataset.value,t=this.dataset.sort;J(e,t)})});function J(a,e){const t=document.querySelector(".filterAvisos-container"),o=Array.from(document.querySelectorAll(".filterAvisos-card"));o.sort(function(c,i){let r,n;switch(a){case"relevancia":r=new Date(c.dataset.relevancia),n=new Date(i.dataset.relevancia),console.log(`Comparando relevancia: ${r} y ${n}`);break;case"menor_precio_soles":case"mayor_precio_soles":r=parseFloat(c.dataset.precio_soles),n=parseFloat(i.dataset.precio_soles),console.log(`Comparando precios en soles: ${r} y ${n}`);break;case"menor_precio_dolares":case"mayor_precio_dolares":r=parseFloat(c.dataset.precio_dolares),n=parseFloat(i.dataset.precio_dolares),console.log(`Comparando precios en dólares: ${r} y ${n}`);break;case"recientes":r=new Date(c.dataset.reciente),n=new Date(i.dataset.reciente),console.log(`Comparando fechas: ${r} y ${n}`);break;case"vistos":r=parseInt(c.dataset.vistos),n=parseInt(i.dataset.vistos),console.log(`Comparando vistos: ${r} y ${n}`);break;default:return 0}const s=e==="asc"?r-n:n-r;return console.log(`Resultado de la comparación: ${s}`),s}),t.innerHTML="",o.forEach(function(c){t.appendChild(c)}),document.getElementById("relevanceFilterTittle").innerText=K(a)}function K(a){switch(a){case"menor_precio_soles":return"Menor precio Soles";case"mayor_precio_soles":return"Mayor precio Soles";case"menor_precio_dolares":return"Menor precio Dólares";case"mayor_precio_dolares":return"Mayor precio Dólares";case"recientes":return"Recientes";case"vistos":return"Más vistos";default:return"Relevancia"}}
