window.initMap=function(){const n=document.getElementById("map"),d=document.getElementById("place_input"),f=document.getElementById("direccion"),y=document.getElementById("distrito"),v=document.getElementById("provincia"),_=document.getElementById("departamento"),o=document.getElementById("latitude"),i=document.getElementById("longitude"),b={lat:parseFloat(o==null?void 0:o.value)||-12.04596,lng:parseFloat(i==null?void 0:i.value)||-77.03054};let s,l,m,k,c=!1;const h=[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station",stylers:[{visibility:"off"}]}];s=new google.maps.Map(n,{center:b,zoom:15,styles:h}),k=new google.maps.Geocoder,l=new google.maps.Marker({position:b,map:s,draggable:!0,icon:{url:"/images/svg/marker_puja.svg",scaledSize:new google.maps.Size(80,80),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(40,80)}}),P(),s.addListener("click",e=>{c=!0,p(e.latLng,!0)}),l.addListener("dragend",()=>{c=!0,p(l.getPosition(),!0)});function P(){m=new google.maps.places.Autocomplete(d),m.addListener("place_changed",()=>{const e=m.getPlace();if(e.geometry){const t=e.geometry.location;p(t,!1),s.setCenter(t),w(e,!1)}})}function p(e,t){l.setPosition(e),s.panTo(e),o&&(o.value=e.lat()),i&&(i.value=e.lng()),t&&C(e)}function C(e){k.geocode({location:e},(t,u)=>{u==="OK"&&t[0]&&w(t[0],!0)})}function w(e,t){if(!c||t){const u=e.address_components;let g="",r="",E="",I="",L="",B="";u.forEach(a=>{switch(a.types[0]){case"street_number":B=a.long_name;break;case"route":L=a.long_name;break;case"locality":r=a.long_name;break;case"sublocality":r||(r=a.long_name);break;case"administrative_area_level_2":E=a.long_name;break;case"administrative_area_level_1":I=a.long_name;break}}),g=`${L} ${B}`.trim(),f&&(f.value=g),y&&(y.value=r),v&&(v.value=E),_&&(_.value=I),d&&(d.value=g),c=!1}}};document.addEventListener("DOMContentLoaded",()=>{const n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBuCCuPnZoJYgILw9e3PNom-ZG5TnsGNeg&libraries=places&callback=initMap",n.async=!0,document.head.appendChild(n)});
