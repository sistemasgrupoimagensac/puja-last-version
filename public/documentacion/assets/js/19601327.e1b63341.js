"use strict";(self.webpackChunkdocumentacion=self.webpackChunkdocumentacion||[]).push([[3174],{8683:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"tecnica/DT_Manejo_Leads_Proyecto","title":"Manejo de Leads Proyecto","description":"---","source":"@site/docs/tecnica/DT_Manejo_Leads_Proyecto.md","sourceDirName":"tecnica","slug":"/tecnica/DT_Manejo_Leads_Proyecto","permalink":"/documentacion/docs/tecnica/DT_Manejo_Leads_Proyecto","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_label":"Manejo de Leads Proyecto","sidebar_position":12,"title":"Manejo de Leads Proyecto"},"sidebar":"documentationSidebar","previous":{"title":"Pago Proyecto Inmobiliario","permalink":"/documentacion/docs/tecnica/DT_Pago_Proyecto_Inmobiliario"},"next":{"title":"Agregar GoogleSheet a Proyecto","permalink":"/documentacion/docs/tecnica/DT_Agregar_GoogleSheet_Proyecto"}}');var s=o(4848),d=o(8453);const c={sidebar_label:"Manejo de Leads Proyecto",sidebar_position:12,title:"Manejo de Leads Proyecto"},l="Documento T\xe9cnico: Gesti\xf3n de Leads de Proyectos",i={},a=[{value:"1. Resumen",id:"1-resumen",level:2},{value:"2. Requisitos Funcionales Relacionados",id:"2-requisitos-funcionales-relacionados",level:2},{value:"3. Base de Datos Relacionada",id:"3-base-de-datos-relacionada",level:2},{value:"Tablas Implicadas",id:"tablas-implicadas",level:3},{value:"Tabla: <code>proyecto_leads</code>",id:"tabla-proyecto_leads",level:4},{value:"4. APIs y Scripts",id:"4-apis-y-scripts",level:2},{value:"Ruta GET: <code>/contacto/proyecto</code>",id:"ruta-get-contactoproyecto",level:3},{value:"Ruta POST: <code>/contacto/proyecto</code>",id:"ruta-post-contactoproyecto",level:3},{value:"Sincronizaci\xf3n con Google Sheets",id:"sincronizaci\xf3n-con-google-sheets",level:3},{value:"5. Controladores",id:"5-controladores",level:2},{value:"<code>ContactoController</code>",id:"contactocontroller",level:3},{value:"6. Historial de Cambios",id:"6-historial-de-cambios",level:2}];function t(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"documento-t\xe9cnico-gesti\xf3n-de-leads-de-proyectos",children:"Documento T\xe9cnico: Gesti\xf3n de Leads de Proyectos"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-resumen",children:"1. Resumen"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Descripci\xf3n:"}),(0,s.jsx)(n.br,{}),"\n","Este documento t\xe9cnico detalla el flujo de captura y gesti\xf3n de leads para proyectos inmobiliarios, incluyendo el almacenamiento en la base de datos y la sincronizaci\xf3n con un Google Sheet para facilitar su an\xe1lisis y gesti\xf3n."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prop\xf3sito:"}),(0,s.jsx)(n.br,{}),"\n","Garantizar que los leads generados a trav\xe9s del formulario ",(0,s.jsx)(n.code,{children:"/contacto/proyecto"})," sean validados, almacenados de manera eficiente en la base de datos, y enviados a una hoja de c\xe1lculo en Google Sheets para el an\xe1lisis del equipo de ventas."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-requisitos-funcionales-relacionados",children:"2. Requisitos Funcionales Relacionados"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"ID"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Nombre del Requisito"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RF012"})}),(0,s.jsx)(n.td,{children:"Gesti\xf3n de Leads de Proyectos"}),(0,s.jsx)(n.td,{children:"Permite a los usuarios llenar un formulario para generar un lead."})]})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-base-de-datos-relacionada",children:"3. Base de Datos Relacionada"}),"\n",(0,s.jsx)(n.h3,{id:"tablas-implicadas",children:"Tablas Implicadas"}),"\n",(0,s.jsxs)(n.h4,{id:"tabla-proyecto_leads",children:["Tabla: ",(0,s.jsx)(n.code,{children:"proyecto_leads"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prop\xf3sito:"}),(0,s.jsx)(n.br,{}),"\n","Almacena la informaci\xf3n b\xe1sica de los leads generados desde el formulario de contacto."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Columna"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Tipo"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"id"})}),(0,s.jsx)(n.td,{children:"BIGINT (PK)"}),(0,s.jsx)(n.td,{children:"Identificador \xfanico del lead."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"nombre"})}),(0,s.jsx)(n.td,{children:"VARCHAR(255)"}),(0,s.jsx)(n.td,{children:"Nombre completo del lead."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"correo"})}),(0,s.jsx)(n.td,{children:"VARCHAR(255)"}),(0,s.jsx)(n.td,{children:"Direcci\xf3n de correo del lead."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"telefono"})}),(0,s.jsx)(n.td,{children:"VARCHAR(20)"}),(0,s.jsx)(n.td,{children:"N\xfamero de tel\xe9fono del lead."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"mensaje"})}),(0,s.jsx)(n.td,{children:"TEXT"}),(0,s.jsx)(n.td,{children:"Mensaje opcional proporcionado por el lead."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"estado"})}),(0,s.jsx)(n.td,{children:"ENUM"}),(0,s.jsxs)(n.td,{children:["Estado del lead (",(0,s.jsx)(n.code,{children:"sin_contactar"})," o ",(0,s.jsx)(n.code,{children:"contactado"}),")."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"respondio"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Indica si el lead ha respondido."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"interesado"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:"Indica si el lead est\xe1 interesado."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"fecha_contacto"})}),(0,s.jsx)(n.td,{children:"DATE"}),(0,s.jsx)(n.td,{children:"Fecha en la que se contact\xf3 al lead."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"created_at"})}),(0,s.jsx)(n.td,{children:"TIMESTAMP"}),(0,s.jsx)(n.td,{children:"Fecha y hora de creaci\xf3n del registro."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"updated_at"})}),(0,s.jsx)(n.td,{children:"TIMESTAMP"}),(0,s.jsx)(n.td,{children:"Fecha y hora de la \xfaltima actualizaci\xf3n del registro."})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-apis-y-scripts",children:"4. APIs y Scripts"}),"\n",(0,s.jsxs)(n.h3,{id:"ruta-get-contactoproyecto",children:["Ruta GET: ",(0,s.jsx)(n.code,{children:"/contacto/proyecto"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Controlador:"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.code,{children:"ContactoController@contacto_proyecto"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Descripci\xf3n:"}),(0,s.jsx)(n.br,{}),"\n","Renderiza la vista ",(0,s.jsx)(n.code,{children:"contacto_proyecto"}),", donde se muestra el formulario de contacto para generar un lead de proyecto."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"ruta-post-contactoproyecto",children:["Ruta POST: ",(0,s.jsx)(n.code,{children:"/contacto/proyecto"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Controlador:"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.code,{children:"ContactoController@contacto_lead_proyecto_store"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validaciones:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nombre"}),": Obligatorio, m\xe1ximo 50 caracteres."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"correo"}),": Obligatorio, formato de email v\xe1lido, m\xe1ximo 60 caracteres."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"telefono"}),': Obligatorio, debe comenzar con "9", 9 d\xedgitos (formato peruano).']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mensaje"}),": Opcional, m\xe1ximo 2000 caracteres."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Flujo de Datos:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Se valida la informaci\xf3n enviada desde el formulario."}),"\n",(0,s.jsxs)(n.li,{children:["Si los datos son v\xe1lidos:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Se crea un registro en la tabla ",(0,s.jsx)(n.code,{children:"proyecto_leads"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Se env\xedan los datos a un Google Sheet mediante el m\xe9todo ",(0,s.jsx)(n.code,{children:"sendDataToGoogleSheet()"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Si los datos son inv\xe1lidos:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Se devuelve una respuesta HTTP 422 con los errores de validaci\xf3n."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Ejemplo de Respuesta Exitosa:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n    "http_code": 200,\r\n    "status": "Success",\r\n    "message": "Env\xedo de consulta correcto"\r\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Ejemplo de Respuesta con Error:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n    "http_code": 500,\r\n    "status": "Error",\r\n    "message": "Error al enviar datos a Google Sheets.",\r\n    "error": "Descripci\xf3n del error"\r\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"sincronizaci\xf3n-con-google-sheets",children:"Sincronizaci\xf3n con Google Sheets"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"M\xe9todo:"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.code,{children:"ContactoController@sendDataToGoogleSheet"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prop\xf3sito:"}),(0,s.jsx)(n.br,{}),"\n","Enviar la informaci\xf3n capturada del lead al Google Sheet designado."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Flujo:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Se construye la URL del Google Apps Script."}),"\n",(0,s.jsxs)(n.li,{children:["Se prepara un arreglo con los datos del lead (",(0,s.jsx)(n.code,{children:"nombre"}),", ",(0,s.jsx)(n.code,{children:"correo"}),", ",(0,s.jsx)(n.code,{children:"telefono"}),", ",(0,s.jsx)(n.code,{children:"mensaje"}),")."]}),"\n",(0,s.jsx)(n.li,{children:"Se realiza una solicitud POST a la URL."}),"\n",(0,s.jsx)(n.li,{children:"Si la solicitud falla, se lanza una excepci\xf3n que notifica del error."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"C\xf3digo Clave:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"private function sendDataToGoogleSheet($lead)\r\n{\r\n    $scriptUrl = 'https://script.google.com/macros/s/.../exec?action=addRow';\r\n    $data = [\r\n        'action' => 'addRow',\r\n        'nombres' => $lead->nombre,\r\n        'correo' => $lead->correo,\r\n        'telefono' => $lead->telefono,\r\n        'mensaje' => $lead->mensaje,\r\n    ];\r\n\r\n    $response = Http::post($scriptUrl, $data);\r\n\r\n    if ($response->failed()) {\r\n        throw new \\Exception('Error al enviar datos a Google Sheets.');\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-controladores",children:"5. Controladores"}),"\n",(0,s.jsx)(n.h3,{id:"contactocontroller",children:(0,s.jsx)(n.code,{children:"ContactoController"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"M\xe9todo:"})," ",(0,s.jsx)(n.code,{children:"contacto_proyecto"}),(0,s.jsx)(n.br,{}),"\n","Renderiza la vista del formulario de contacto."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"M\xe9todo:"})," ",(0,s.jsx)(n.code,{children:"contacto_lead_proyecto_store"}),(0,s.jsx)(n.br,{}),"\n","Valida y almacena los datos del formulario en la base de datos. Luego, sincroniza los datos con Google Sheets."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6-historial-de-cambios",children:"6. Historial de Cambios"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Versi\xf3n"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Fecha"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Cambios Realizados"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Autor"})})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"v1.0"}),(0,s.jsx)(n.td,{children:"11/12/2024"}),(0,s.jsx)(n.td,{children:"Documento t\xe9cnico inicial creado"}),(0,s.jsx)(n.td,{children:"Walker Alfaro"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>c,x:()=>l});var r=o(6540);const s={},d=r.createContext(s);function c(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);